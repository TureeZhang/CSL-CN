!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/forms"),require("@angular/platform-browser"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-markdown-editor",["exports","@angular/common","@angular/forms","@angular/platform-browser","@angular/core"],t):t(e["ngx-markdown-editor"]={},e.ng.common,e.ng.forms,e.ng.platformBrowser,e.ng.core)}(this,function(e,t,n,i,o){"use strict";var r=function(){function e(e,t,n,i){void 0===e&&(e=!1),void 0===t&&(t=-1),this.required=e,this.maxlength=t,this._renderer=n,this._domSanitizer=i,this.hideToolbar=!1,this.height="300px",this._options={},this.hideIcons={},this.showPreviewPanel=!0,this.isFullScreen=!1,this.dragover=!1,this.isUploading=!1,this._defaultOption={showBorder:!0,hideIcons:[],scrollPastEnd:0,enablePreviewContentClick:!1,resizable:!1},this._onChange=function(e){},this._onTouched=function(){}}return Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode||"editor"},set:function(e){(!e||"editor"!==e.toLowerCase()&&"preview"!==e.toLowerCase())&&(e="editor"),this._mode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options||{}},set:function(e){var t=this;this._options=Object.assign(this._defaultOption,{},e),this.hideIcons={},this._options.hideIcons&&this._options.hideIcons.forEach(function(e){return t.hideIcons[e]=!0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markdownValue",{get:function(){return this._markdownValue||""},set:function(t){var n=this;this._markdownValue=t,this._onChange(t),this.preRender&&this.preRender instanceof Function&&(t=this.preRender(t)),null!==t&&t!==undefined&&(this._renderMarkTimeout&&clearTimeout(this._renderMarkTimeout),this._renderMarkTimeout=setTimeout(function(){var e=marked(t||"",n._markedOpt);n.previewHtml=n._domSanitizer.bypassSecurityTrustHtml(e)},100))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_hasUploadFunction",{get:function(){return this.upload&&this.upload instanceof Function},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=new marked.Renderer;e.code=function(e,t){return'<pre style="padding: 0; border-radius: 0;"><code class="hljs '+t+'">'+(!(!t||!hljs.getLanguage(t))?hljs.highlight(t,e).value:e)+"</code></pre>"},e.table=function(e,t){return'<table class="table table-bordered">\n<thead>\n'+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},e.listitem=function(e){return/^\s*\[[x ]\]\s*/.test(e)?'<li style="list-style: none;">'+(e=e.replace(/^\s*\[ \]\s*/,'<i class="fa fa-square-o" style="margin: 0 0.2em 0.25em -1.6em;"></i> ').replace(/^\s*\[x\]\s*/,'<i class="fa fa-check-square" style="margin: 0 0.2em 0.25em -1.6em;"></i> '))+"</li>":"<li>"+e+"</li>"};var t={renderer:e,highlight:function(e){return hljs.highlightAuto(e).value}};this._markedOpt=Object.assign({},this.options.markedjsOpt,t)},e.prototype.ngAfterViewInit=function(){var n=this,e=this.aceEditorContainer.nativeElement;this._editor=ace.edit(e),this._editor.$blockScrolling=Infinity,this._editor.getSession().setUseWrapMode(!0),this._editor.getSession().setMode("ace/mode/markdown"),this._editor.setValue(this.markdownValue||"",1),this._editor.setOption("scrollPastEnd",this._options.scrollPastEnd||0),this._editor.on("change",function(e){var t=n._editor.getValue();n.markdownValue=t})},e.prototype.ngOnDestroy=function(){this._editor&&this._editor.destroy()},e.prototype.writeValue=function(e){var t=this;setTimeout(function(){void 0!==(t.markdownValue=e)&&t._editor&&t._editor.setValue(e||"",1)},1)},e.prototype.registerOnChange=function(e){this._onChange=e},e.prototype.registerOnTouched=function(e){this._onTouched=e},e.prototype.validate=function(e){var t=null;return this.required&&0===this.markdownValue.length&&(t={required:!0}),0<this.maxlength&&this.markdownValue.length>this.maxlength&&(t={maxlength:!0}),t},e.prototype.insertContent=function(e,t){if(this._editor){var n=this._editor.getSelectedText(),i=!!n,o=2,r="",a=this._editor.selection.getRange();switch(e){case"Bold":r="Bold Text",n="**"+(n||r)+"**";break;case"Italic":r="Italic Text",n="*"+(n||r)+"*",o=1;break;case"Heading":r="Heading",n="# "+(n||r);break;case"Refrence":r="Refrence",n="> "+(n||r);break;case"Link":n="[](http://)",o=1;break;case"Image":n="![](http://)";break;case"Ul":n="- "+(n||r);break;case"Ol":n="1. "+(n||r),o=3;break;case"Code":r="Source Code",n="```language\r\n"+(n||r)+"\r\n```",o=3;break;case"Custom":n=t,o=0}this._editor.session.replace(a,n),i||(a.start.column+=o,a.end.column=a.start.column+r.length,this._editor.selection.setRange(a)),this._editor.focus()}},e.prototype.togglePreview=function(){this.showPreviewPanel=!this.showPreviewPanel,this.editorResize()},e.prototype.previewPanelClick=function(e){!0!==this.options.enablePreviewContentClick&&(e.preventDefault(),e.stopImmediatePropagation())},e.prototype.fullScreen=function(){this.isFullScreen=!this.isFullScreen,this._renderer.setElementStyle(document.body,"overflowY",this.isFullScreen?"hidden":"auto"),this.editorResize()},e.prototype.mdEditorResize=function(e){this.editorResize()},e.prototype.editorResize=function(e){var t=this;void 0===e&&(e=100),this._editor&&(this._editorResizeTimer&&clearTimeout(this._editorResizeTimer),this._editorResizeTimer=setTimeout(function(){t._editor.resize(),t._editor.focus()},e))},e.prototype.onDragover=function(e){e.stopImmediatePropagation(),e.preventDefault(),this._hasUploadFunction&&(this.dragover=!0)},e.prototype.onDrop=function(e){var c=this;e.stopImmediatePropagation(),e.preventDefault(),this._hasUploadFunction&&!this.isUploading&&(e.dataTransfer.files&&0!==e.dataTransfer.files.length?(this.isUploading=!0,Promise.resolve().then(function(){return c.upload(e.dataTransfer.files)}).then(function(e){var t,n;if(Array.isArray(e)){var i=[];try{for(var o=function d(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(e),r=o.next();!r.done;r=o.next()){var a=r.value,s="["+a.name+"]("+a.url+")";a.isImg&&(s="!"+s),i.push(s)}}catch(l){t={error:l}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(t)throw t.error}}c.insertContent("Custom",i.join("\r\n"))}else console.warn("Invalid upload result. Please using follow this type `UploadResult`.");c.isUploading=!1,c.dragover=!1})["catch"](function(e){console.error(e),c.isUploading=!1,c.dragover=!1})):this.dragover=!1)},e.prototype.onDragleave=function(e){e.stopImmediatePropagation(),e.preventDefault(),this._hasUploadFunction&&(this.dragover=!1)},e.decorators=[{type:o.Component,args:[{selector:"md-editor",template:'<div class="md-editor-container" [class.fullscreen]="isFullScreen" [class.md-editor-resizable]="options?.resizable"\r\n  [style.height]="height">\r\n  <div class="md-layout">\r\n    <div class="tool-bar" *ngIf="!hideToolbar && mode != \'preview\'">\r\n      <div class="btn-group">\r\n        <button class="btn btn-sm btn-default" type="button" title="Bold" (click)="insertContent(\'Bold\')"\r\n          *ngIf="!hideIcons.Bold">\r\n          <i class="fa fa-bold"></i>\r\n        </button>\r\n        <button class="btn btn-sm btn-default" type="button" title="Italic" (click)="insertContent(\'Italic\')"\r\n          *ngIf="!hideIcons.Italic">\r\n          <i class="fa fa-italic"></i>\r\n        </button>\r\n        <button class="btn btn-sm btn-default" type="button" title="Heading" (click)="insertContent(\'Heading\')"\r\n          *ngIf="!hideIcons.Heading">\r\n          <i class="fa fa-header"></i>\r\n        </button>\r\n        <button class="btn btn-sm btn-default" type="button" title="Refrence" (click)="insertContent(\'Refrence\')"\r\n          *ngIf="!hideIcons.Refrence">\r\n          <i class="fa fa-quote-left"></i>\r\n        </button>\r\n      </div>\r\n      <div class="btn-group">\r\n        <button class="btn btn-sm btn-default" type="button" title="Link" (click)="insertContent(\'Link\')"\r\n          *ngIf="!hideIcons.Link">\r\n          <i class="fa fa-link"></i>\r\n        </button>\r\n        <button class="btn btn-sm btn-default" type="button" title="Image" (click)="insertContent(\'Image\')"\r\n          *ngIf="!hideIcons.Image">\r\n          <i class="fa fa-image"></i>\r\n        </button>\r\n      </div>\r\n      <div class="btn-group">\r\n        <button class="btn btn-sm btn-default" type="button" title="Unordered List" (click)="insertContent(\'Ul\')"\r\n          *ngIf="!hideIcons.Ul">\r\n          <i class="fa fa-list-ul"></i>\r\n        </button>\r\n        <button class="btn btn-sm btn-default" type="button" title="Ordered List" (click)="insertContent(\'Ol\')"\r\n          *ngIf="!hideIcons.Ol">\r\n          <i class="fa fa-list-ol"></i>\r\n        </button>\r\n        <button class="btn btn-sm btn-default" type="button" title="Code Block" (click)="insertContent(\'Code\')"\r\n          *ngIf="!hideIcons.Code">\r\n          <i class="fa fa-file-code-o"></i>\r\n        </button>\r\n      </div>\r\n      <div class="btn-group">\r\n        <button class="btn btn-sm btn-default" type="button"\r\n          [attr.title]="showPreviewPanel ? \'Hide Preview\' : \'Show Preview\'" (click)="togglePreview()"\r\n          *ngIf="!hideIcons.TogglePreview">\r\n          <i class="fa" [class.fa-eye]="!showPreviewPanel" [class.fa-eye-slash]="showPreviewPanel"></i>\r\n        </button>\r\n      </div>\r\n      <div class="btn-group pull-right hide-split">\r\n        <button class="btn btn-sm btn-default" type="button" [class.active]="isFullScreen" (click)="fullScreen()"\r\n          *ngIf="!hideIcons.FullScreen">\r\n          <i class="fa fa-arrows-alt"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class="editor-container">\r\n      <div [class.dragover]="dragover" [style.display]="mode == \'preview\' ? \'none\' : null"\r\n        (dragover)="onDragover($event)">\r\n        <div class="drag-container">\r\n          <div class="upload-loading">\r\n            <i class="fa fa-upload" *ngIf="!isUploading"></i>\r\n            <i class="fa fa-spinner fa-pulse fa-fw" *ngIf="isUploading"></i>\r\n            <div class="text">{{ isUploading ? \'Uploading\' : \'Drag it here\' }}</div>\r\n          </div>\r\n        </div>\r\n        <div class="drag-container drag-container-mask" (drop)="onDrop($event)" (dragleave)="onDragleave($event)"></div>\r\n        <div class="editor-panel">\r\n          <div class="ace-editor" #aceEditor></div>\r\n        </div>\r\n      </div>\r\n      <div [style.display]="showPreviewPanel ? \'block\' : \'none\'" (click)="previewPanelClick($event)">\r\n        <div class="preview-panel" [innerHtml]="previewHtml"></div>\r\n      </div>\r\n    </div>\r\n    <div class="md-footer" *ngIf="maxlength > 0 && mode != \'preview\'">\r\n      <div class="text-right length-view">\r\n        {{ markdownValue?.length }} / {{ maxlength }}\r\n      </div>\r\n      <div class="resize-btn"></div>\r\n    </div>\r\n  </div>\r\n  <md-editor-resize-sensor *ngIf="options?.resizable" (resize)="mdEditorResize($event)"></md-editor-resize-sensor>\r\n</div>\r\n',providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:o.forwardRef(function(){return e}),multi:!0},{provide:n.NG_VALIDATORS,useExisting:o.forwardRef(function(){return e}),multi:!0}],styles:[".md-editor-container{position:relative;height:100%;margin-bottom:15px;border:1px solid rgba(0,0,0,.1)}.md-editor-container.fullscreen{margin:0;position:fixed;border:0;top:0;left:0;width:100%!important;height:100%!important;z-index:99999999}.md-editor-container.md-editor-resizable:not(.fullscreen){resize:both;overflow:auto;display:inline-block;width:100%}.md-editor-container.md-editor-resizable:not(.fullscreen) .md-footer{z-index:-1}.md-editor-container .md-layout{height:100%;display:flex;flex-direction:column}.md-editor-container .md-layout .tool-bar{background-color:#f5f5f5;border-bottom:1px solid rgba(0,0,0,.1)}.md-editor-container .md-layout .tool-bar .btn-group{padding:6px}.md-editor-container .md-layout .tool-bar .btn-group:first-child>.btn:first-child::before{display:none}.md-editor-container .md-layout .tool-bar .btn-group>.btn:first-child::before{content:' ';background-color:#a9a9a9;width:1px;height:24px;left:-9px;top:2px;position:absolute}.md-editor-container .md-layout .tool-bar .btn-group.hide-split>.btn:first-child::before{display:none}.md-editor-container .md-layout .tool-bar .btn{margin-bottom:0}.md-editor-container .md-layout .editor-container{flex:1;display:flex}.md-editor-container .md-layout .editor-container>div{flex:1}.md-editor-container .md-layout .editor-container>div .drag-container{display:none}.md-editor-container .md-layout .editor-container>div.dragover{position:relative}.md-editor-container .md-layout .editor-container>div.dragover .drag-container{display:block;position:absolute;left:0;top:0;right:0;bottom:0;z-index:10;background-color:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;font-size:50px;color:#fff}.md-editor-container .md-layout .editor-container>div.dragover .drag-container.drag-container-mask{background-color:transparent;z-index:11}.md-editor-container .md-layout .editor-container>div.dragover .drag-container .upload-loading{display:flex;flex-direction:column;align-items:center}.md-editor-container .md-layout .editor-container>div.dragover .drag-container .upload-loading .text{font-size:20px;margin-top:10px}.md-editor-container .md-layout .editor-container .editor-panel{height:100%}.md-editor-container .md-layout .editor-container .editor-panel .ace-editor{height:100%;min-height:100%}.md-editor-container .md-layout .preview-panel{height:100%;border-left:1px solid rgba(0,0,0,.1);background-color:#fff;padding:10px;overflow-y:auto}.md-editor-container .md-layout .md-footer{background-color:#f0f0f0;border-top:1px solid rgba(0,0,0,.1);display:flex;align-items:center}.md-editor-container .md-layout .md-footer .length-view{flex:1;padding:4px 2px 0;font-size:12px;line-height:16px}.md-editor-container .md-layout .md-footer .resize-btn{width:17px}"]}]}],e.ctorParameters=function(){return[{type:Boolean,decorators:[{type:o.Attribute,args:["required"]}]},{type:Number,decorators:[{type:o.Attribute,args:["maxlength"]}]},{type:o.Renderer},{type:i.DomSanitizer}]},e.propDecorators={aceEditorContainer:[{type:o.ViewChild,args:["aceEditor"]}],hideToolbar:[{type:o.Input}],height:[{type:o.Input}],preRender:[{type:o.Input}],upload:[{type:o.Input}],mode:[{type:o.Input}],options:[{type:o.Input}]},e}(),a=function(){function e(e){this._ngZone=e,this.interval=500,this.resize=new o.EventEmitter,this.sizeInfo={width:0,height:0}}return e.prototype.ngAfterViewInit=function(){var e=this;this.sizeInfo={width:this.resizeSensor.nativeElement.offsetWidth,height:this.resizeSensor.nativeElement.offsetHeight},this._ngZone.runOutsideAngular(function(){setTimeout(function(){e.detectSize()},e.interval)})},e.prototype.detectSize=function(){var e=this,t=this.resizeSensor.nativeElement.offsetWidth,n=this.resizeSensor.nativeElement.offsetHeight;this.sizeInfo.width===t&&this.sizeInfo.height===n||(this.sizeInfo={width:t,height:n},this.resize.emit(this.sizeInfo)),setTimeout(function(){e.detectSize()},this.interval)},e.decorators=[{type:o.Component,args:[{selector:"md-editor-resize-sensor",template:'<div class="md-editor-resize-sensor" #resizeSensor></div>\r\n',styles:[".md-editor-resize-sensor{position:absolute;left:0;right:0;top:0;bottom:0;z-index:-1}"]}]}],e.ctorParameters=function(){return[{type:o.NgZone}]},e.propDecorators={resizeSensor:[{type:o.ViewChild,args:["resizeSensor"]}],interval:[{type:o.Input}],resize:[{type:o.Output}]},e}(),s=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{declarations:[r,a],imports:[t.CommonModule,n.FormsModule],exports:[r,a]}]}],e}();e.MarkdownEditorComponent=r,e.MarkdownEditorResizeSensorComponent=a,e.LMarkdownEditorModule=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-markdown-editor.umd.min.js.map